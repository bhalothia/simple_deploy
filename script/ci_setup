#!/bin/bash

day=`date "+%d"`

# Source my jenkins config if available
if [ -f ~/.jenkins.sh ]; then
  . ~/.jenkins.sh
  fi

  # Set ruby version
  RUBY_VERSION=2.0.0-p247

  # Install ruby version
  rvm install ruby-$RUBY_VERSION --disable-binary --verify-downloads 1

  # Set ruby / gemset
  rvm use $RUBY_VERSION@simple_deploy --create

  # Reload RVM to fix Seg Fault that was going to drive Weaver instance
  rvm reload

  # Install new version of simple_deploy
  bundle install
  rake install

  echo simple_deploy envs --------------
  simple_deploy envs

  echo simple_deploy list --------------
  simple_deploy list -e default

  echo simple_deploy create --------------
#  simple_deploy create -e default -n jenkins-test-stack

  echo simple_deploy instances --------------
#  simple_deploy instances -e default -n lc-pod-2-dev-1-app-5-ccloestest

  echo simple_deploy attributes --------------
#  simple_deploy attributes -e default -n lc-pod-2-dev-1-app-5-ccloestest

  echo simple_deploy outputs --------------
#  simple_deploy outputs -e default -n lc-pod-2-dev-1-app-5-ccloestest

  echo simple_deploy resources --------------
#  simple_deploy resources -e default -n lc-pod-2-dev-1-app-5-ccloestest

  echo simple_deploy template --------------
#  simple_deploy template -e default -n lc-pod-2-dev-1-app-5-ccloestest

  echo simple_deploy status --------------
#  simple_deploy status -e default -n lc-pod-2-dev-1-app-5-ccloestest

  echo simple_deploy events --------------
#  simple_deploy events -e default -n lc-pod-2-dev-1-app-5-ccloestest

  echo simple_deploy deploy --------------
#  simple_deploy deploy -e default -n lc-pod-2-dev-1-app-5-ccloestest -a app=c1e025a5d5702bfcee42b2b742d466e6ad18d393 -f

  echo simple_deploy update --------------
#  simple_deploy update -e default -n lc-pod-2-dev-1-app-5-ccloestest -a chad=testvalue

  echo simple_deploy update --------------
#  simple_deploy update -e default -n lc-pod-2-dev-1-app-5-ccloestest -a chad=nil

  echo simple_deploy deploy --------------
#  simple_deploy deploy -e default -n lc-pod-2-dev-1-app-5-ccloestest -a app=c1e025a5d5702bfcee42b2b742d466e6ad18d393

  echo simple_deploy destroy --------------
#  simple_deploy destroy -e default -n lc-pod-2-dev-1-app-5-ccloestestclone
